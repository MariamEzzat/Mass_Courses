<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: public/js/frontEnd/tasks/filter&paginationTasks.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: public/js/frontEnd/tasks/filter&paginationTasks.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>let taskList_paginationList_buttons = document.querySelectorAll('#taskList_paginationList li');
/**
 * pagination buttons to show next/previous tasks list (max. 10 tasks in each page) 
 * @event click - pagination for tasks list
 */
taskList_paginationList_buttons.forEach(btn => {
    btn.onclick = function(e) {
        e.preventDefault();
        if (e.target.title == 'next') {
            let pageN = parseInt(taskList_paginationList_buttons[1].children[0].title) + 1
            taskList_paginationList_buttons[1].children[0].title = pageN
            taskList_paginationList_buttons[1].children[0].innerHTML = pageN
            tasksList_pageNumer = pageN
            let filterOptions = removeEmptiesObjInsideObj(getFilterObject());
            GetFilteredData(filterOptions, tasksList_pageNumer)


        } else if (e.target.title == 'previous' &amp;&amp; parseInt(taskList_paginationList_buttons[1].children[0].title) != 1) {
            let pageP = parseInt(taskList_paginationList_buttons[1].children[0].title) - 1
            taskList_paginationList_buttons[1].children[0].title = pageP
            taskList_paginationList_buttons[1].children[0].innerHTML = pageP
            tasksList_pageNumer = pageP
            let filterOptions = removeEmptiesObjInsideObj(getFilterObject());
            GetFilteredData(filterOptions, tasksList_pageNumer)


        }
    }
});
/* ====================================filter tasks ========================= */

let taskList_filter_projects;
/**
 *selected project in filter tasks
 * @event change - project filter list
 */
/* $('#taskList_filter_projects').change(function(e) {
    var selected = $(e.target).val();
    taskList_filter_projects = selected;
    let selectedOption = $('#taskList_filter_projects').find('option:selected');
    e.target.parentNode.nextElementSibling.innerHTML = ''
    for (let sel of selectedOption) {
        e.target.parentNode.nextElementSibling.innerHTML += ` (${sel.innerHTML}) `
    }
    document.querySelector('#taskList_filter_submit').click()
});

let taskList_filter_users;
$('#taskList_filter_users').change(function(e) {
    var selected = $(e.target).val();
    taskList_filter_users = selected;
    let selectedOption = $('#taskList_filter_users').find('option:selected');
    e.target.parentNode.nextElementSibling.innerHTML = ''
    for (let sel of selectedOption) {
        e.target.parentNode.nextElementSibling.innerHTML += ` (${sel.innerHTML}) `
    }
    document.querySelector('#taskList_filter_submit').click()
}); */

let filterEstimation = document.querySelectorAll('input[name="taskList_filter_estimation"]')
let EstimationInfilterchoiceFuture, EstimationInfilterchoiceStarted, EstimationInfilterchoiceNone;
/** 
 *selected estimation in filter tasks
 * @event click - selected est. in filter tasks list
 */
filterEstimation.forEach(radioBtn => {
    radioBtn.onclick = (e) => {
        e.target = true;
        if (e.target.id.split('_')[3] == 'future') {
            EstimationInfilterchoiceFuture = 1;
            EstimationInfilterchoiceStarted = undefined;
            EstimationInfilterchoiceNone = undefined;
        } else if (e.target.id.split('_')[3] == 'started') {
            EstimationInfilterchoiceFuture = undefined;
            EstimationInfilterchoiceStarted = 1;
            EstimationInfilterchoiceNone = undefined;
        } else {
            EstimationInfilterchoiceFuture = undefined;
            EstimationInfilterchoiceStarted = undefined;
            EstimationInfilterchoiceNone = undefined;
        }
        //document.querySelector('#taskList_filter_submit').click()
    }
});

let taskList_filter_overdue = document.querySelector('input[id="taskList_filter_overdue"]')
let checkOverDue;
/** 
 * checked or not overdue in filter tasks
 * @event change -overdue in tasks list
 */
taskList_filter_overdue.addEventListener('change', (e) => {
    if (e.target.checked == true) {
        checkOverDue = 1
    } else {
        checkOverDue = ''
    }
    //document.querySelector('#taskList_filter_submit').click()
});

/** 
 * get data that will  filter depend on it
 * @function getFilterObject
 */
function getFilterObject() {
    let formData = getIDsAndValuesFormAnyForm('taskList_filter')
    let estimationFilter = {
        future: EstimationInfilterchoiceFuture,
        started: EstimationInfilterchoiceStarted,
        none: EstimationInfilterchoiceNone
    }

    let taskFilterObj;
    if (EstimationInfilterchoiceFuture == undefined &amp;&amp; EstimationInfilterchoiceStarted == undefined &amp;&amp; EstimationInfilterchoiceNone == undefined) {
        taskFilterObj = {
            project: formData.taskList_filter_projects,
            to: formData.taskList_filter_users,
            overdue: checkOverDue
        }
    } else {
        taskFilterObj = {
            project: formData.taskList_filter_projects,
            to: formData.taskList_filter_users,
            estimation: removeEmptiesObjInsideObj(estimationFilter),
            overdue: checkOverDue
        }
    }
    return taskFilterObj
};

/**
 * get tasks list upon filter form filled by user ,
 * if response with empty object then user can't to go next page because there's no data to show
 * @function GetFilteredData 
 * @param {object} filterOptions - represent the object will be sent to server, contain user's name, project's name, estimation and if it overdue or not
 * @param {number} PageNumber - represent the page number that user request
 */
function GetFilteredData(filterOptions, PageNumber) {
    runLoadingAnimation('Loading ... .')
    get(
        IDENTIFIERS.TASKS.FILTER, {
            pageNumber: tasksList_pageNumer,
            pageSize: 10,
            query: filterOptions
        },
        function(data) {
            taskList_paginationList_buttons[1].children[0].title = PageNumber
            taskList_paginationList_buttons[1].children[0].innerHTML = PageNumber
            usersList = data.users
            stopLoadingAnimation();
            if (data.tasks.length != 0) {
                fillTasksListTable(data);
            } else {

                document.querySelector('#warningAlertModal_continue').classList.add('d-none')
                warningAlert('No More Tasks', undefined, () => {
                    document.querySelector('#warningAlertModal_continue').classList.remove('d-none')
                    document.querySelector('#warningAlertModal_paragraph').innerHTML = ''
                });

                if ($(window).width() &lt; '890') {
                    document.querySelector('#taskListTable').innerHTML = `
                                &lt;thead class="text-capitalize font-weight-bold tableHeadYellow">
                                &lt;th>task name&lt;/th>
                                &lt;td>&lt;/td>
                                &lt;td>&lt;/td>
                            &lt;/thead>
                         `;
                    if (parseInt(taskList_paginationList_buttons[1].children[0].title) != 1) {
                        taskList_paginationList_buttons[1].children[0].title = taskList_paginationList_buttons[1].children[0].innerHTML = tasksList_pageNumer = PageNumber - 1
                        let filterOptions = removeEmptiesObjInsideObj(getFilterObject());
                        GetFilteredData(filterOptions, PageNumber - 1)
                    } else {
                        taskList_paginationList_buttons[1].children[0].title = taskList_paginationList_buttons[1].children[0].innerHTML = tasksList_pageNumer = 1

                    }
                } else {
                    document.querySelector('#taskListTable').innerHTML = `
                        &lt;thead class="tableHeadYellow">
                            &lt;tr class="text-center">
                                &lt;th style="width: 20%;" class="font-weight-bold text-capitalize" scope="col">name&lt;/th>
                                &lt;th style="width: 10%;" class="font-weight-bold text-capitalize" scope="col">project&lt;/th>
                                &lt;th style="width: 10%;" class="font-weight-bold text-capitalize" scope="col">deadLine&lt;/th>
                                &lt;th style="width: 10%;" class="font-weight-bold text-capitalize" scope="col">from&lt;/th>
                                &lt;th style="width: 10%;" class="font-weight-bold text-capitalize" scope="col">to&lt;/th>
                                &lt;th style="width: 10%;" class="font-weight-bold text-capitalize" scope="col">estimated time&lt;/th>
                                &lt;th style="width: 15%;" class="font-weight-bold text-capitalize" scope="col">progress&lt;/th>
                 
                            &lt;/tr>
                        &lt;/thead>
                        `;
                    if (parseInt(taskList_paginationList_buttons[1].children[0].title) != 1) {
                        taskList_paginationList_buttons[1].children[0].title = taskList_paginationList_buttons[1].children[0].innerHTML = tasksList_pageNumer = PageNumber - 1
                        let filterOptions = removeEmptiesObjInsideObj(getFilterObject());
                        GetFilteredData(filterOptions, PageNumber - 1)
                    } else {
                        taskList_paginationList_buttons[1].children[0].title = taskList_paginationList_buttons[1].children[0].innerHTML = tasksList_pageNumer = 1

                    }
                }
            };
        },
        function(data) {
            stopLoadingAnimation();
            console.log(data.errMsg);
            notifyResult(false, data.userMsg);
            modalNewTask.classList.add('d-none');
        }
    );
};

/*  */
let taskList_filter_submit = document.querySelector('#taskList_filter_submit');
/** 
 * button which send data to server to get filtered tasks
 * @event submit -send tasks filter obj 
 */
taskList_filter_submit.onclick = function(e) {
    e.preventDefault();
    let filterOptions = removeEmptiesObjInsideObj(getFilterObject());

    tasksList_pageNumer = 1
    GetFilteredData(filterOptions, tasksList_pageNumer)
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Document.html">Document</a></li><li><a href="Field.html">Field</a></li><li><a href="Socket.html">Socket</a></li></ul><h3>Events</h3><ul><li><a href="click%2520-%2520selected%2520est.html#.event:infiltertaskslist"> in filter tasks list</a></li><li><a href="global.html#event:change-projectfilterlist">change - project filter list</a></li><li><a href="global.html#event:change-handlingmultiselectfornewtask">change -handling multi select for newtask</a></li><li><a href="global.html#event:change-overdueintaskslist">change -overdue in tasks list</a></li><li><a href="global.html#event:click-ifprojectBasedcategorytasksettingischecked">click -  if projectBased category task setting is checked</a></li><li><a href="global.html#event:click-ifpubliccategorytasksettingischecked">click -  if public category task setting is checked</a></li><li><a href="global.html#event:click-closetaskviewmodal">click - close task view modal</a></li><li><a href="global.html#event:click-ifpublicprojecttasksettingischecked">click - if public project task setting is checked</a></li><li><a href="global.html#event:click-paginationfortaskslist">click - pagination for tasks list</a></li><li><a href="global.html#event:click-paginationlogrecord">click - pagination log record</a></li><li><a href="global.html#event:click-subtasksaddedinnewtaskform">click - subtasks added in new task form</a></li><li><a href="global.html#event:EncryptionResponder">EncryptionResponder</a></li><li><a href="global.html#event:submit-addsubtask">submit - add subtask</a></li><li><a href="global.html#event:submit-submitlogform">submit - submit log form</a></li><li><a href="global.html#event:submit-submittaskafteredit">submit - submit task after edit</a></li><li><a href="global.html#event:submit-sendtasksfilterobj">submit -send tasks filter obj</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addLocationIfNew">addLocationIfNew</a></li><li><a href="global.html#addNewCategory-sentcategoryobjecttothisfunction">addNewCategory - sent category object to this function</a></li><li><a href="global.html#addNewProject-sentprojectobjecttothisfunction">addNewProject - sent project object to this function</a></li><li><a href="global.html#cachedUsers">cachedUsers</a></li><li><a href="global.html#clearNewTaskInputs">clearNewTaskInputs</a></li><li><a href="global.html#clearNewTaskInputs-clearnewtasksinputs">clearNewTaskInputs - clear new tasks inputs</a></li><li><a href="global.html#comments">comments</a></li><li><a href="global.html#dataToSend">dataToSend</a></li><li><a href="global.html#deleteSubTaskS">deleteSubTaskS</a></li><li><a href="global.html#editTask">editTask</a></li><li><a href="global.html#EditTaskModal">EditTaskModal</a></li><li><a href="global.html#fillEditTaskForm">fillEditTaskForm</a></li><li><a href="global.html#fillLogRecordTable">fillLogRecordTable</a></li><li><a href="global.html#fillNewTaskPreData">fillNewTaskPreData</a></li><li><a href="global.html#fillOutputsOfTaskView">fillOutputsOfTaskView</a></li><li><a href="global.html#fillPreData">fillPreData</a></li><li><a href="global.html#fillSubTasksList">fillSubTasksList</a></li><li><a href="global.html#fillTableLogForSubTask">fillTableLogForSubTask</a></li><li><a href="global.html#fillTableOfLogProgress-filltableoflogprogress">fillTableOfLogProgress - fill table of log progress</a></li><li><a href="global.html#fillTaskLogProgressData">fillTaskLogProgressData</a></li><li><a href="global.html#fillTasksListTable">fillTasksListTable</a></li><li><a href="global.html#fillTasksSettingsPreData">fillTasksSettingsPreData</a></li><li><a href="global.html#getCommentsList">getCommentsList</a></li><li><a href="global.html#getCookie">getCookie</a></li><li><a href="global.html#GetFilteredData">GetFilteredData</a></li><li><a href="global.html#GetFilteredDataLogRecord">GetFilteredDataLogRecord</a></li><li><a href="global.html#getFilterObject">getFilterObject</a></li><li><a href="global.html#getIDsAndValuesFormAnyForm">getIDsAndValuesFormAnyForm</a></li><li><a href="global.html#getServiceReciever">getServiceReciever</a></li><li><a href="global.html#GETspecificTask">GETspecificTask</a></li><li><a href="global.html#getTasksIDAndName">getTasksIDAndName</a></li><li><a href="global.html#getTasksStatesPreData">getTasksStatesPreData</a></li><li><a href="global.html#getTaskStates">getTaskStates</a></li><li><a href="global.html#getUsers">getUsers</a></li><li><a href="global.html#getUsersIdentifiers">getUsersIdentifiers</a></li><li><a href="global.html#insertComment">insertComment</a></li><li><a href="global.html#insertLogProgress">insertLogProgress</a></li><li><a href="global.html#insertLogRecord">insertLogRecord</a></li><li><a href="global.html#insertNewState">insertNewState</a></li><li><a href="global.html#isValidEnvelope-">isValidEnvelope -</a></li><li><a href="global.html#loadLogRecordFirstTime">loadLogRecordFirstTime</a></li><li><a href="global.html#loadNewTaskData-getpreDataofnewtasktofilllistsinnewtaskform">loadNewTaskData - get preData of new task to fill lists in new task form</a></li><li><a href="global.html#loadTasksFirstTime">loadTasksFirstTime</a></li><li><a href="global.html#missingProperties">missingProperties</a></li><li><a href="global.html#postServiceResponse">postServiceResponse</a></li><li><a href="global.html#preHomeAuth-HOMEPAGESERVING">preHomeAuth -HOME PAGE SERVING</a></li><li><a href="global.html#reciever">reciever</a></li><li><a href="global.html#reciever-services/">reciever - services/</a></li><li><a href="global.html#request">request</a></li><li><a href="global.html#respondsCallbacks">respondsCallbacks</a></li><li><a href="global.html#retrieveEditTaskInputs">retrieveEditTaskInputs</a></li><li><a href="global.html#retrieveNewTaskInputs">retrieveNewTaskInputs</a></li><li><a href="global.html#servicesRequests">servicesRequests</a></li><li><a href="global.html#setCookie">setCookie</a></li><li><a href="global.html#statesPreData">statesPreData</a></li><li><a href="global.html#submitNewComment">submitNewComment</a></li><li><a href="global.html#submitNewTask-newtaskobjectwillbesenttoit">submitNewTask - new task object will be sent to it</a></li><li><a href="global.html#taskContainsSubtask">taskContainsSubtask</a></li><li><a href="global.html#taskNewState">taskNewState</a></li><li><a href="global.html#tasksLogsRecordsFilter">tasksLogsRecordsFilter</a></li><li><a href="global.html#tasksPreData">tasksPreData</a></li><li><a href="global.html#taskStates">taskStates</a></li><li><a href="global.html#userAssignedTasks">userAssignedTasks</a></li><li><a href="global.html#userTasks">userTasks</a></li><li><a href="global.html#verifyUser">verifyUser</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Thu Mar 18 2021 16:55:02 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
