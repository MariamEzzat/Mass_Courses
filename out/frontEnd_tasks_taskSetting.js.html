<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: frontEnd/tasks/taskSetting.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: frontEnd/tasks/taskSetting.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* get data choosen from list of private users and put it output to show it to user and save the array of selected users to use it in submit */
let taskSetting_projectSetting_private_users_list = document.querySelector('#taskSetting_projectSetting_private_users_list')
let taskSetting_projectSetting_private_users = [];
$('#taskSetting_projectSetting_private_users_list').change(function(e) {
    let selected = $(e.target).val();
    taskSetting_projectSetting_private_users = selected;
    let selectedOption = $('#taskSetting_projectSetting_private_users_list').find('option:selected');
    e.target.parentNode.nextElementSibling.innerHTML = '';
    for (sel of selectedOption) {
        e.target.parentNode.nextElementSibling.innerHTML += ` (${sel.innerHTML}) `;
    }
});

/* get data choosen from list of project based users and put it output to show it to user and save the array of selected users to use it in submit */
let taskSetting_categorySetting_projectBased_projects_list = document.querySelector('#taskSetting_categorySetting_projectBased_projects_list');
let taskSetting_categorySetting_privateBased_users = [];
$('#taskSetting_categorySetting_projectBased_projects_list').change(function(e) {
    let selected = $(e.target).val();
    console.log(selected);
    taskSetting_categorySetting_privateBased_users = selected;
    let selectedOption = $('#taskSetting_categorySetting_projectBased_projects_list').find('option:selected');
    e.target.parentNode.nextElementSibling.innerHTML = '';
    for (sel of selectedOption) {
        e.target.parentNode.nextElementSibling.innerHTML += ` (${sel.innerHTML})   `
    };
});

/*  when click on global in project setting section will close private collapse */
$('#taskSetting_projectSetting_input_public').on('click', function() {
    if ($(this).is(':checked')) {
        $(this).val(1)
        taskSetting_projectSetting_private_users = []
        $('#taskSetting_projectSetting_private_users ').collapse('hide');
        $('#taskSetting_projectSetting_private_users_list').selectpicker('deselectAll');
    };
});

/* in task setting if public is checked then its value =1 and if not checked its value = 0 */
$('#taskSetting_projectSetting_input_private').on('click', function() {
    if ($(this).is(':checked')) {
        $('#taskSetting_projectSetting_input_public').val(0)
    }
});

/* when user do many clicks on private choice will keep collapse of users private opened */
$('#taskSetting_projectSetting_input_private').on('click', function() {
    if ($(this).is(':checked')) {
        $('#taskSetting_projectSetting_private_users').removeClass('show');
    };
});

/*  when click on global in category setting section will close project Based collapse */
$('#taskSetting_categorySetting_input_public').on('click', function() {
    if ($(this).is(':checked')) {
        $(this).val(1)
        taskSetting_categorySetting_privateBased_users = []
        $('#taskSetting_categorySetting_input_projectBased_projects ').collapse('hide')
        $('#taskSetting_categorySetting_projectBased_users_list').selectpicker('deselectAll');
    }
});

/* in task setting if public is checked then its value =1 and if not checked its value = 0 */
$('#taskSetting_categorySetting_input_projectBased').on('click', function() {
    if ($(this).is(':checked')) {
        $('#taskSetting_categorySetting_input_public').val(0)
    }
});
/* when user do many clicks on private choice will keep collapse of users project based opened */
$('#taskSetting_categorySetting_input_projectBased').on('click', function() {
    if ($(this).is(':checked')) {
        $('#taskSetting_categorySetting_input_projectBased_projects').removeClass('show');
    };
});

/**
 * pre data from server get it and put it in list of users and projects and categories
 * @constructor
 * @param {object} tasksPreData - get data of lists in task setting tab
 */
function fillTasksSettingsPreData(tasksPreData) {
    let privateProject = '&lt;option>&lt;/option>';
    for (element of tasksPreData.users) {
        privateProject += `&lt;option value="${element.userID}">${element.visualName}&lt;/option>`;
    };
    taskSetting_projectSetting_private_users_list.innerHTML = privateProject;
    taskSetting_categorySetting_projectBased_users_list.innerHTML = privateProject
    $("#taskSetting_projectSetting_private_users_list").selectpicker('refresh');
    $("#taskSetting_categorySetting_projectBased_users_list").selectpicker('refresh');

    let projectsList = '';
    for (element of tasksPreData.projects) {
        projectsList += `&lt;li>- ${element.name}&lt;/li>`;
    };
    document.querySelector('#taskSetting_projectsSetting_ul_savedProjects').innerHTML = projectsList;

    let categoriesList = '';
    for (element of tasksPreData.categories) {
        categoriesList += `&lt;li>- ${element.name}&lt;/li>`;
    };
    document.querySelector('#taskSetting_categorySetting_ul_savedCategories').innerHTML = categoriesList;
};

let projectSettingForm = document.querySelector('#projectSetting');
projectSettingForm.addEventListener('submit', function(e) {
    e.preventDefault();
    let formData = getIDsAndValuesFormAnyForm('projectSetting');
    project = {
        name: formData.taskSetting_projectSetting_input_projectName,
        isPublic: parseInt(formData.taskSetting_projectSetting_input_public),
        users: taskSetting_projectSetting_private_users
    };
    addNewProject(project)
});

let categorySettingForm = document.querySelector('#categorySetting');
categorySettingForm.addEventListener('submit', function(e) {
    e.preventDefault();
    let formData = getIDsAndValuesFormAnyForm('categorySetting');
    categories = {
        name: formData.taskSetting_categorySetting_input_categoryName,
        isPublic: parseInt(formData.taskSetting_categorySetting_input_public),
        users: taskSetting_categorySetting_privateBased_users
    };
    addNewCategory(categories);
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="clearNewTaskInputs.html">clearNewTaskInputs</a></li><li><a href="clearTaskLogProgressInputs.html">clearTaskLogProgressInputs</a></li><li><a href="deleteSubTaskS.html">deleteSubTaskS</a></li><li><a href="EditTaskModal.html">EditTaskModal</a></li><li><a href="fillEditTaskForm.html">fillEditTaskForm</a></li><li><a href="fillLogRecordTable.html">fillLogRecordTable</a></li><li><a href="fillNewTaskPreData.html">fillNewTaskPreData</a></li><li><a href="fillOutputsOfTaskView.html">fillOutputsOfTaskView</a></li><li><a href="fillSubTasksList.html">fillSubTasksList</a></li><li><a href="fillTasksListTable.html">fillTasksListTable</a></li><li><a href="fillTasksSettingsPreData.html">fillTasksSettingsPreData</a></li><li><a href="GetFilteredData.html">GetFilteredData</a></li><li><a href="GetFilteredDataLogRecord.html">GetFilteredDataLogRecord</a></li><li><a href="getFilterObject.html">getFilterObject</a></li><li><a href="GETspecificTask.html">GETspecificTask</a></li><li><a href="getTasksIDAndName.html">getTasksIDAndName</a></li><li><a href="loadLogRecordFirstTime.html">loadLogRecordFirstTime</a></li><li><a href="loadTasksFirstTime.html">loadTasksFirstTime</a></li><li><a href="retrieveNewTaskInputs.html">retrieveNewTaskInputs</a></li><li><a href="taskList_specificTask_openModalAddSubTask.onclick.html">onclick</a></li></ul><h3>Global</h3><ul><li><a href="global.html#fillTaskLogProgressData">fillTaskLogProgressData</a></li><li><a href="global.html#retrieveEditTaskInputs">retrieveEditTaskInputs</a></li><li><a href="global.html#retrieveTaskLogProgressInputs">retrieveTaskLogProgressInputs</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Thu Feb 25 2021 16:57:54 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
